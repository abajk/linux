# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mtd/lantiq,nand.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Lantiq Xway NAND Flash Controller devicetree bindings

maintainers:
  - Aleksander Bajkowski <olek2@wp.pl>

allOf:
  - $ref: nand-controller.yaml#

properties:
  compatible:
    enum:
      - lantiq,nand-xway

  reg:
    maxItems: 1

  bank-width:
    description:
      Width (in bytes) of the device.  If not present, the width
      defaults to 1 byte
    maxItems: 1

  partitions:
    type: object
    description:
      Node containing description of fixed partitions.
      See Documentation/devicetree/bindings/mtd/partition.txt

required:
  - compatible
  - reg

unevaluatedProperties: false

examples:
  - |
    localbus@0 {
      #address-cells = <2>;
      #size-cells = <1>;
      ranges = <0 0 0x0 0x3ffffff /* addrsel0 */
                1 0 0x4000000 0x4000010>; /* addsel1 */

      nand-controller@1 {
        compatible = "lantiq,nand-xway";
        reg = <0x1 0x0 0x2000000>;
        lantiq,cs = <1>;
        bank-width = <2>;

        #address-cells = <1>;
        #size-cells = <0>;

        pinctrl-0 = <&nand_pins>, <&nand_cs1_pins>;
        pinctrl-names = "default";

        partitions {
          compatible = "fixed-partitions";
          #address-cells = <1>;
          #size-cells = <1>;

          partition@0 {
            label = "u-boot";
            reg = <0x0 0xa0000>;
            read-only;
          };

          partition@a0000 {
            label = "u-boot-env";
            reg = <0xa0000 0x20000>;
            read-only;
          };

          partition@c0000 {
            label = "firmware";
            reg = <0xc0000 0x40000>;
          };

          partition@100000 {
            label = "ubi";
            reg = <0x100000 0x7e80000>;
          };
        };
      };
    };
